# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“‚ å®Œæ•´ç›®å½•ç»“æ„

```
ai_study/
â”‚
â”œâ”€â”€ frontend/                          # å‰ç«¯é¡¹ç›®ï¼ˆReact + TypeScriptï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatInterface.tsx     # ä¸»èŠå¤©ç•Œé¢ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ChatInterface.css     # èŠå¤©ç•Œé¢æ ·å¼
â”‚   â”‚   â”œâ”€â”€ App.tsx                    # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.css                    # åº”ç”¨ä¸»æ ·å¼ï¼ˆæ¸å˜èƒŒæ™¯åŠ¨ç”»ï¼‰
â”‚   â”‚   â”œâ”€â”€ main.tsx                   # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ index.css                  # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ index.html                     # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ package.json                   # NPM ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json                  # TypeScript é…ç½®
â”‚   â”œâ”€â”€ tsconfig.node.json             # Node TypeScript é…ç½®
â”‚   â”œâ”€â”€ vite.config.ts                 # Vite æ„å»ºé…ç½®
â”‚   â”œâ”€â”€ .gitignore                     # Git å¿½ç•¥æ–‡ä»¶
â”‚   â””â”€â”€ README.md                      # å‰ç«¯æ–‡æ¡£
â”‚
â”œâ”€â”€ backend/                           # åç«¯é¡¹ç›®ï¼ˆFastAPI + AutoGenï¼‰
â”‚   â”œâ”€â”€ main.py                        # FastAPI ä¸»åº”ç”¨ï¼ˆè·¯ç”±ã€ä¸­é—´ä»¶ï¼‰
â”‚   â”œâ”€â”€ chat_service.py                # AutoGen èŠå¤©æœåŠ¡å®ç°
â”‚   â”œâ”€â”€ config.py                      # é…ç½®ç®¡ç†ï¼ˆä½¿ç”¨ Pydantic Settingsï¼‰
â”‚   â”œâ”€â”€ models.py                      # æ•°æ®æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ requirements.txt               # Python ä¾èµ–
â”‚   â”œâ”€â”€ env.example                    # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â”œâ”€â”€ .gitignore                     # Git å¿½ç•¥æ–‡ä»¶
â”‚   â””â”€â”€ README.md                      # åç«¯æ–‡æ¡£
â”‚
â”œâ”€â”€ start_backend.bat                  # Windows åç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_frontend.bat                 # Windows å‰ç«¯å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_all.bat                      # Windows ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ setup.bat                          # Windows ç¯å¢ƒé…ç½®è„šæœ¬
â”‚
â”œâ”€â”€ .gitignore                         # é¡¹ç›®æ ¹ Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                          # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ QUICK_START.md                     # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â””â”€â”€ PROJECT_STRUCTURE.md               # æœ¬æ–‡ä»¶

```

## ğŸ¯ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

#### 1. `frontend/src/components/ChatInterface.tsx`
- **ä½œç”¨**ï¼šä¸»èŠå¤©ç•Œé¢ç»„ä»¶
- **åŠŸèƒ½**ï¼š
  - æ¶ˆæ¯åˆ—è¡¨å±•ç¤º
  - ç”¨æˆ·è¾“å…¥å¤„ç†
  - SSE æµå¼æ¥æ”¶
  - è‡ªåŠ¨æ»šåŠ¨
  - æ¸…ç©ºå¯¹è¯

#### 2. `frontend/src/App.tsx`
- **ä½œç”¨**ï¼šåº”ç”¨ä¸»ç»„ä»¶
- **åŠŸèƒ½**ï¼š
  - é…ç½® Ant Design ä¸»é¢˜
  - æ·±è‰²æ¨¡å¼é…ç½®
  - å…¨å±€æ ·å¼å®¹å™¨

#### 3. `frontend/vite.config.ts`
- **ä½œç”¨**ï¼šVite æ„å»ºé…ç½®
- **åŠŸèƒ½**ï¼š
  - é…ç½®å¼€å‘æœåŠ¡å™¨
  - è®¾ç½®ä»£ç†è½¬å‘ API è¯·æ±‚
  - æ„å»ºä¼˜åŒ–

### åç«¯æ ¸å¿ƒæ–‡ä»¶

#### 1. `backend/main.py`
- **ä½œç”¨**ï¼šFastAPI ä¸»åº”ç”¨
- **åŠŸèƒ½**ï¼š
  - å®šä¹‰ API è·¯ç”±
  - é…ç½® CORS ä¸­é—´ä»¶
  - ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå¯åŠ¨/å…³é—­ï¼‰
  - å¼‚å¸¸å¤„ç†
  - SSE æµå¼è¾“å‡º

**ä¸»è¦ç«¯ç‚¹**ï¼š
```python
GET  /                    # æ ¹è·¯å¾„
GET  /api/health         # å¥åº·æ£€æŸ¥
POST /api/chat           # éæµå¼èŠå¤©
POST /api/chat/stream    # SSE æµå¼èŠå¤©
```

#### 2. `backend/chat_service.py`
- **ä½œç”¨**ï¼šAutoGen èŠå¤©æœåŠ¡
- **åŠŸèƒ½**ï¼š
  - åˆå§‹åŒ– AutoGen Agent
  - å¤„ç†å¯¹è¯è¯·æ±‚
  - æµå¼è¾“å‡ºå®ç°
  - èµ„æºæ¸…ç†

#### 3. `backend/config.py`
- **ä½œç”¨**ï¼šé…ç½®ç®¡ç†
- **åŠŸèƒ½**ï¼š
  - ä½¿ç”¨ Pydantic Settings ç®¡ç†é…ç½®
  - ä»ç¯å¢ƒå˜é‡åŠ è½½é…ç½®
  - æä¾›ç±»å‹å®‰å…¨çš„é…ç½®è®¿é—®

#### 4. `backend/models.py`
- **ä½œç”¨**ï¼šæ•°æ®æ¨¡å‹å®šä¹‰
- **åŠŸèƒ½**ï¼š
  - è¯·æ±‚/å“åº”æ•°æ®æ¨¡å‹
  - æ•°æ®éªŒè¯
  - API æ–‡æ¡£ç”Ÿæˆ

### å¯åŠ¨è„šæœ¬

#### 1. `setup.bat`
- **ä½œç”¨**ï¼šä¸€é”®ç¯å¢ƒé…ç½®
- **åŠŸèƒ½**ï¼š
  - åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒ
  - å®‰è£…æ‰€æœ‰ä¾èµ–
  - é…ç½®ç¯å¢ƒå˜é‡
  - å®‰è£… AutoGen

#### 2. `start_all.bat`
- **ä½œç”¨**ï¼šä¸€é”®å¯åŠ¨å®Œæ•´ç³»ç»Ÿ
- **åŠŸèƒ½**ï¼š
  - åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
  - åœ¨ç‹¬ç«‹çª—å£ä¸­è¿è¡Œ

#### 3. `start_backend.bat`
- **ä½œç”¨**ï¼šå•ç‹¬å¯åŠ¨åç«¯
- **åŠŸèƒ½**ï¼š
  - æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ
  - æ¿€æ´»ç¯å¢ƒ
  - å¯åŠ¨ FastAPI æœåŠ¡å™¨

#### 4. `start_frontend.bat`
- **ä½œç”¨**ï¼šå•ç‹¬å¯åŠ¨å‰ç«¯
- **åŠŸèƒ½**ï¼š
  - æ£€æŸ¥ä¾èµ–
  - å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨

## ğŸ”„ æ•°æ®æµ

### ç”¨æˆ·å‘é€æ¶ˆæ¯æµç¨‹

```
ç”¨æˆ·è¾“å…¥
  â†“
ChatInterface.tsx (handleSend)
  â†“
fetch POST /api/chat/stream
  â†“
main.py (stream_chat)
  â†“
event_generator
  â†“
chat_service.py (stream_chat)
  â†“
AutoGen Agent (run)
  â†“
OpenAI API
  â†“
æµå¼è¿”å› (SSE)
  â†“
ChatInterface.tsx (æ›´æ–°UI)
  â†“
Bubble.List å±•ç¤º
```

### SSE æ•°æ®æ ¼å¼

```
data: {"content": "æ–‡æœ¬å—", "role": "assistant"}

data: {"content": "ä¸‹ä¸€å—", "role": "assistant"}

data: [DONE]

```

## ğŸ¨ ç•Œé¢ç»„ä»¶å±‚æ¬¡

```
App (ä¸»é¢˜é…ç½®)
  â””â”€â”€ ChatInterface (èŠå¤©å®¹å™¨)
      â”œâ”€â”€ chat-header (å¤´éƒ¨)
      â”‚   â”œâ”€â”€ æ ‡é¢˜å’Œå›¾æ ‡
      â”‚   â””â”€â”€ æ¸…ç©ºæŒ‰é’®
      â”‚
      â”œâ”€â”€ chat-body (æ¶ˆæ¯åŒºåŸŸ)
      â”‚   â””â”€â”€ Bubble.List (æ¶ˆæ¯åˆ—è¡¨)
      â”‚       â”œâ”€â”€ Bubble (ç”¨æˆ·æ¶ˆæ¯)
      â”‚       â””â”€â”€ Bubble (AI æ¶ˆæ¯)
      â”‚
      â””â”€â”€ chat-footer (è¾“å…¥åŒºåŸŸ)
          â””â”€â”€ Sender (è¾“å…¥ç»„ä»¶)
```

## ğŸ”§ é…ç½®æ–‡ä»¶

### å‰ç«¯é…ç½®

- `package.json` - NPM ä¾èµ–å’Œè„šæœ¬
- `tsconfig.json` - TypeScript ç¼–è¯‘é€‰é¡¹
- `vite.config.ts` - Vite æ„å»ºå’Œå¼€å‘æœåŠ¡å™¨é…ç½®

### åç«¯é…ç½®

- `requirements.txt` - Python ä¾èµ–
- `.env` - ç¯å¢ƒå˜é‡ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰
- `env.example` - ç¯å¢ƒå˜é‡æ¨¡æ¿

## ğŸ“¦ ä¾èµ–è¯´æ˜

### å‰ç«¯ä¾èµ–

**æ ¸å¿ƒä¾èµ–**ï¼š
- `react` & `react-dom` - React æ¡†æ¶
- `@ant-design/x` - AI å¯¹è¯ç»„ä»¶åº“
- `antd` - Ant Design UI ç»„ä»¶åº“
- `axios` - HTTP å®¢æˆ·ç«¯ï¼ˆæœªç›´æ¥ä½¿ç”¨ï¼Œä½¿ç”¨åŸç”Ÿ fetchï¼‰

**å¼€å‘ä¾èµ–**ï¼š
- `vite` - æ„å»ºå·¥å…·
- `typescript` - ç±»å‹ç³»ç»Ÿ
- `@vitejs/plugin-react` - React æ’ä»¶

### åç«¯ä¾èµ–

**æ ¸å¿ƒä¾èµ–**ï¼š
- `fastapi` - Web æ¡†æ¶
- `uvicorn` - ASGI æœåŠ¡å™¨
- `autogen-agentchat` - AutoGen AI Agent
- `autogen-ext[openai]` - OpenAI æ‰©å±•
- `python-dotenv` - ç¯å¢ƒå˜é‡åŠ è½½
- `pydantic` - æ•°æ®éªŒè¯
- `sse-starlette` - SSE æ”¯æŒ

## ğŸš€ æŠ€æœ¯æ¶æ„

### å‰ç«¯æ¶æ„

```
React 18 (UIæ¡†æ¶)
  â†“
TypeScript (ç±»å‹å®‰å…¨)
  â†“
Vite (æ„å»ºå·¥å…·)
  â†“
Ant Design X (å¯¹è¯ç»„ä»¶)
  â†“
SSE (æµå¼æ¥æ”¶)
```

### åç«¯æ¶æ„

```
FastAPI (Webæ¡†æ¶)
  â†“
Pydantic (æ•°æ®éªŒè¯)
  â†“
AutoGen (AI Agent)
  â†“
OpenAI API (å¤§æ¨¡å‹)
  â†“
SSE (æµå¼è¾“å‡º)
```

## ğŸ” å®‰å…¨è€ƒè™‘

1. **CORS é…ç½®**ï¼šé™åˆ¶å…è®¸çš„æº
2. **ç¯å¢ƒå˜é‡**ï¼šæ•æ„Ÿä¿¡æ¯ä¸æäº¤åˆ°ä»£ç åº“
3. **è¾“å…¥éªŒè¯**ï¼šä½¿ç”¨ Pydantic éªŒè¯è¯·æ±‚æ•°æ®
4. **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
5. **æ—¥å¿—è®°å½•**ï¼šå®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ

## ğŸ“ å¼€å‘å»ºè®®

1. **å‰ç«¯å¼€å‘**ï¼š
   - ä¿®æ”¹æ ·å¼ï¼š`frontend/src/components/ChatInterface.css`
   - æ·»åŠ åŠŸèƒ½ï¼š`frontend/src/components/ChatInterface.tsx`
   - æ›´æ”¹ä¸»é¢˜ï¼š`frontend/src/App.tsx`

2. **åç«¯å¼€å‘**ï¼š
   - æ·»åŠ è·¯ç”±ï¼š`backend/main.py`
   - ä¿®æ”¹ Agentï¼š`backend/chat_service.py`
   - è°ƒæ•´é…ç½®ï¼š`backend/config.py`

3. **è°ƒè¯•**ï¼š
   - å‰ç«¯ï¼šæµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - åç«¯ï¼šæŸ¥çœ‹ç»ˆç«¯æ—¥å¿—
   - APIï¼šè®¿é—® http://localhost:8000/docs

## ğŸ¯ æ‰©å±•æ–¹å‘

- [ ] æ·»åŠ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] æ”¯æŒå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡
- [ ] å®ç°å¯¹è¯å†å²ä¿å­˜
- [ ] æ·»åŠ  Markdown æ¸²æŸ“
- [ ] æ”¯æŒä»£ç é«˜äº®
- [ ] æ·»åŠ è¯­éŸ³è¾“å…¥
- [ ] æ”¯æŒå›¾ç‰‡ä¸Šä¼ 
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] Docker å®¹å™¨åŒ–éƒ¨ç½²
- [ ] æ€§èƒ½ç›‘æ§å’Œæ—¥å¿—åˆ†æ

